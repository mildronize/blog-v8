+++
title = "‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏î‡πâ‡∏ß‡∏¢ VPN with Tailscale ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Kubectl context ‡∏â‡∏ö‡∏±‡∏ö Homelab EP. 2"
date = "2025-05-13"

[taxonomies]
categories = [ "Kubernetes" ]
tags = [ "Kubernetes", "ubuntu" ]
+++

‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ‡∏ú‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏•‡πà‡∏ô Homelab ‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Ubuntu Server ‡∏ß‡∏≤‡∏á‡∏ù‡∏∏‡πà‡∏ô‡∏°‡∏≤‡∏ô‡∏≤‡∏ô‡∏™‡∏≠‡∏á‡∏õ‡∏µ ‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏° ‡πÅ‡∏ï‡πà‡∏°‡∏±‡∏ô‡∏Å‡πá‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏±‡∏Å‡∏ó‡∏µ ‡πÄ‡∏•‡∏¢‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏ó‡∏≥ Homelab ‡πÅ‡∏ó‡∏ô

‡πÉ‡∏ô **EP.1** ‡∏ú‡∏°‡∏•‡∏á RKE2 (Kubernetes) ‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Ubuntu Server ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ `kubectl` ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

‡πÅ‡∏ï‡πà‚Ä¶ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏°‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á cluster ‡πÑ‡∏î‡πâ **‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å‡∏ö‡πâ‡∏≤‡∏ô** ‡∏ö‡πâ‡∏≤‡∏á ‡πÄ‡∏ä‡πà‡∏ô ‡∏ú‡πà‡∏≤‡∏ô‡πÇ‡∏ô‡πâ‡∏ï‡∏ö‡∏∏‡πä‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≠‡∏Å‡∏ö‡πâ‡∏≤‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ hotspot 5G ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö network ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏î‡πâ

**EP.2 ‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏¢‡∏à‡∏∞‡∏û‡∏≤‡πÑ‡∏õ:**

* ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á [Tailscale](https://tailscale.com/) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô network ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÅ‡∏ö‡∏ö private VPN
* ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `kubectl` ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö K8s cluster ‡∏ú‡πà‡∏≤‡∏ô‡∏ä‡∏∑‡πà‡∏≠ domain ‡∏Ç‡∏≠‡∏á Tailscale (magicDNS)
* ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ TLS certificate ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏ä‡∏∑‡πà‡∏≠ domain
* ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á token-based ‡∏Å‡∏±‡∏ö cert-based auth ‡πÉ‡∏ô Kubernetes ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ ‡πÜ

‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏•‡πà‡∏≤‡∏ï‡∏≤‡∏°‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ú‡∏°‡πÄ‡∏à‡∏≠‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡∏ú‡∏°‡πÉ‡∏ä‡πâ‡πÅ‡∏Å‡πâ‡πÅ‡∏ö‡∏ö‡∏Ñ‡πà‡∏≠‡∏¢ ‡πÜ ‡∏ó‡∏≥ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏∏‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Ñ‡∏£‡∏±‡∏ö

‡πÑ‡∏õ‡∏•‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢ üîß

‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏à‡πâ‡∏≤‡∏°‡∏≤‡∏¢!
‡∏ü‡πâ‡∏≤‡∏à‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô **‡πÄ‡∏Å‡∏£‡∏¥‡πà‡∏ô‡∏ô‡∏≥‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ Tailscale** ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà section ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ö‡∏ô Ubuntu Server
‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏™‡∏ö‡∏≤‡∏¢ ‡πÜ ‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏∞‡∏î‡∏∏‡∏î‡∏ô‡∏∞:

## ‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ Tailscale?

‡∏û‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥ Homelab ‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ñ‡∏∑‡∏≠ ‚Äú‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ‚Äù
‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏ô‡∏±‡πà‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà ‡πÉ‡∏ä‡πâ 5G hotspot ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î ‡∏Å‡πá‡∏≠‡∏¢‡∏≤‡∏Å‡∏à‡∏∞ `ssh` ‡∏´‡∏£‡∏∑‡∏≠ `kubectl` ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ô‡∏±‡πà‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô network ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ forward port ‡∏à‡∏≤‡∏Å router ‡∏Å‡πá‡πÑ‡∏î‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ Dynamic DNS ‡∏Å‡πá‡πÑ‡∏î‡πâ
‡πÅ‡∏ï‡πà‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏±‡πâ‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∏‡πà‡∏á‡∏¢‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ firewall ‡πÄ‡∏≠‡∏á, ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÇ‡∏î‡∏ô scan ‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å, ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ö IP ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ö‡πà‡∏≠‡∏¢ ‡πÜ ‡∏î‡πâ‡∏ß‡∏¢

‡∏ú‡∏°‡πÄ‡∏•‡∏¢‡∏°‡∏≠‡∏á‡∏´‡∏≤ solution ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ:

* ‡∏ó‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô network ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
* ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏∏‡πà‡∏á‡∏Å‡∏±‡∏ö router
* ‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö identity, auth ‡πÅ‡∏•‡∏∞ DNS ‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö
* ‡πÅ‡∏•‡∏∞‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç... **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏á‡πà‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á config ‡πÄ‡∏¢‡∏≠‡∏∞**

‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Å‡πá‡∏°‡∏≤‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ö **Tailscale** ‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏¢‡∏≠‡∏∞‡πÄ‡∏•‡∏¢
‡πÅ‡∏Ñ‡πà login ‡∏Å‡πá‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

‡∏à‡∏≤‡∏Å‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÅ‡∏´‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Tailscale ‡∏ö‡∏ô Ubuntu Server ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô Homelab

‡πÑ‡∏õ‡∏î‡∏π‡∏Å‡∏±‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏á ‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ï‡πà‡∏≤‡∏á ‡πÜ ‡πÄ‡∏Ç‡πâ‡∏≤ network ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏Ñ‡∏£‡∏±‡∏ö üõ†Ô∏è

## ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Tailscale ‡∏ö‡∏ô Ubuntu Server

‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡∏ú‡∏°‡∏•‡∏á App ‡∏Ç‡∏≠‡∏á Tailscale ‡πÑ‡∏ß‡πâ‡∏ö‡∏ô Mac Mini ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏°‡∏±‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏ß‡πà‡∏≤‡∏°‡∏µ device ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏Ñ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡∏á‡∏ù‡∏±‡πà‡∏á Ubuntu Server ‡πÄ‡∏•‡∏¢ ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô RKE2 ‡∏≠‡∏¢‡∏π‡πà

‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏°‡∏≤‡∏•‡∏á Tailscale ‡∏ö‡∏ô Ubuntu Server ‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö

![Tailscale setup screen showing Mac Mini as the first connected device and prompting to add a second device, such as Ubuntu Server.](tailscale-setup-guide.png)

‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:

```bash
curl -fsSL https://tailscale.com/install.sh | sh
```

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡πà‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤ `sudo tailscale up` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

```bash
Installation complete! Log in to start using Tailscale by running:

sudo tailscale up
```

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡πÑ‡∏õ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô Browser ‡πÄ‡∏û‡∏∑‡πà‡∏≠ login ‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Google ‡∏´‡∏£‡∏∑‡∏≠ Microsoft ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö Tailscale

```bash
$ sudo tailscale up

To authenticate, visit:

        https://login.tailscale.com/a/xxxxxxx
```

‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏±‡πâ‡∏ô‡πÉ‡∏ô browser ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î login ‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‚Ä¶ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö!

![Tailscale setup complete screen showing successful connection between two devices: thadas-mac-mini and thadawth.](tailscale-connected.png)

‡∏û‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Mac ‡∏Å‡∏±‡∏ö Ubuntu Server ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢
‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏ó‡∏∂‡πà‡∏á‡∏Ñ‡∏∑‡∏≠ ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ access ‡∏Å‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ä‡∏∑‡πà‡∏≠ domain ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏î‡πâ‡∏ß‡∏¢ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≥ IP ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ

```bash
ssh thadawth.tail1234da.ts.net -i ~/.ssh/my_home_lab/id_rsa
```

‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏à‡∏≤‡∏Å magicDNS ‡∏Ç‡∏≠‡∏á Tailscale ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏ú‡∏π‡∏Å domain ‡πÉ‡∏´‡πâ device ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÇ‡∏î‡∏¢ domain ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ tailnet name ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤

‡∏ä‡∏∑‡πà‡∏≠ tailnet ‡∏à‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ:

```
xxxx.ts.net
```

‡∏ã‡∏∂‡πà‡∏á‡∏ï‡∏≠‡∏ô‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡∏™‡∏∏‡πà‡∏°‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤ ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ admin console ‡∏Ç‡∏≠‡∏á Tailscale

‡πÅ‡∏•‡∏∞‡∏ó‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á IP address (‡∏Ç‡∏≠‡∏á Tailscale) ‡πÅ‡∏•‡∏∞ domain name ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß
‡πÄ‡∏ä‡πà‡∏ô

```
mac-mini.tail1234da.ts.net
ubuntu-server.tail1234da.ts.net
```

‡∏ú‡∏°‡∏Å‡πá‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ ssh ‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ubuntu-server ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏ú‡πà‡∏≤‡∏ô domain ‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏¢

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏≠‡∏µ‡∏Å‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏Ñ‡∏∑‡∏≠ **HTTPS support** ‡∏Ç‡∏≠‡∏á Tailscale
‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ domain ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å (‡πÄ‡∏ä‡πà‡∏ô `https://my-node.tail1234da.ts.net`) ‡πÉ‡∏ä‡πâ TLS ‡πÑ‡∏î‡πâ‡πÅ‡∏ö‡∏ö auto-verified ‡∏à‡∏≤‡∏Å browser ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ

‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ DNS ‡∏Ç‡∏≠‡∏á admin console:
[https://login.tailscale.com/admin/dns](https://login.tailscale.com/admin/dns)

![Tailscale UI that show how to enable HTTPS](tailscale-enable-https.png)

‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `kubectl` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö RKE2 cluster ‡∏ú‡πà‡∏≤‡∏ô DNS ‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö ‡πÅ‡∏•‡∏∞‡∏î‡∏π‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏à‡∏≠ TLS error ‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô‡∏ö‡πâ‡∏≤‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏Å‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏ô‡∏≠‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢


‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏à‡πâ‡∏≤‡∏°‡∏≤‡∏¢! ‚ú®
‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ **‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ kubectl context ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ DNS ‡∏à‡∏≤‡∏Å Tailscale ‡πÅ‡∏•‡∏∞‡πÄ‡∏à‡∏≠ TLS Error ‡∏¢‡∏±‡∏á‡πÑ‡∏á**
‡πÄ‡∏•‡πà‡∏≤‡πÅ‡∏ö‡∏ö‡∏•‡∏∑‡πà‡∏ô ‡πÜ ‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏¢‡∏ô‡∏∞

## ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `kubectl` ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ DNS ‡∏Ç‡∏≠‡∏á Tailscale ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÑ‡∏õ‡∏ó‡∏µ‡πà Cluster

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Mac ‡∏Å‡∏±‡∏ö Ubuntu Server ‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô Tailscale ‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß
‡∏ú‡∏°‡∏Å‡πá‡∏≠‡∏¢‡∏≤‡∏Å‡∏à‡∏∞ `kubectl` ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏¢‡∏±‡∏á RKE2 cluster ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Mac ‡∏ú‡πà‡∏≤‡∏ô domain ‡∏Ç‡∏≠‡∏á Tailscale ‡πÄ‡∏•‡∏¢

‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Ubuntu Server ‡∏Ç‡∏≠‡∏á‡∏ú‡∏°‡∏£‡∏±‡∏ô RKE2 ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà:

```
https://192.168.1.107:6443
```

‡πÅ‡∏ï‡πà‡∏û‡∏≠‡πÄ‡∏£‡∏≤‡∏°‡∏µ Tailscale ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠ domain ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡πÄ‡∏ä‡πà‡∏ô:

```
https://thadawth.tail1234da.ts.net:6443
```

‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô magicDNS ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Ubuntu Server ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å Tailscale

### ‡πÄ‡∏û‡∏¥‡πà‡∏° context ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô kubeconfig

‡∏ú‡∏°‡∏•‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á context ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô `~/.kube/config` ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö:

```yaml
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: xxx
    server: https://192.168.1.107:6443
  name: my_homelab-cluster
- cluster:
    certificate-authority-data: xxx
    server: https://thadawth.tail1234da.ts.net:6443
  name: my_homelab-cluster_tailscale
```

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏•‡∏≠‡∏á‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á:

```bash
kubectl config use-context my_homelab-cluster_tailscale
kubectl get pods
```

‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ñ‡∏∑‡∏≠...

```
E0512 17:44:46.732328   34569 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"https://thadawth.tail1234da.ts.net:6443/api?timeout=32s\": tls: failed to verify certificate: x509: certificate is valid for ..., not thadawth.tail1234da.ts.net"
```

‡∏≠‡πâ‡∏≤‡∏ß... ‡∏ó‡∏≥‡πÑ‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ?

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏∑‡∏≠ TLS Certificate ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠ Tailscale DNS

‡∏ú‡∏°‡πÄ‡∏•‡∏¢‡∏•‡∏≠‡∏á inspect ‡∏ï‡∏±‡∏ß cert ‡∏ó‡∏µ‡πà Kube API Server ‡πÉ‡∏ä‡πâ‡∏≠‡∏¢‡∏π‡πà ‡∏î‡πâ‡∏ß‡∏¢ `openssl`:

```bash
openssl s_client -connect 127.0.0.1:6443 -showcerts </dev/null 2>/dev/null \
  | openssl x509 -noout -text | grep -A1 "Subject Alternative Name"
```

‡∏ú‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡∏∑‡∏≠:

```text
X509v3 Subject Alternative Name:
    DNS:kubernetes, DNS:kubernetes.default, DNS:kubernetes.default.svc,
    DNS:kubernetes.default.svc.cluster.local, DNS:localhost, DNS:thadawth,
    IP Address:127.0.0.1, IP Address:192.168.1.107, ...
```

‡∏à‡∏≤‡∏Å‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤ **‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠ `thadawth.tail1234da.ts.net` ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô SAN** ‡∏Ç‡∏≠‡∏á cert ‡πÄ‡∏•‡∏¢
‡∏ã‡∏∂‡πà‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤ ‡∏ñ‡∏∂‡∏á‡πÅ‡∏°‡πâ‡∏à‡∏∞‡∏ä‡∏µ‡πâ DNS ‡∏°‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß `kubectl` ‡∏Å‡πá‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠ server ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ TLS ‡πÑ‡∏°‡πà match

‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏à‡πâ‡∏≤‡∏°‡∏≤‡∏¢! üîß
‡∏°‡∏≤‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô‡∏ó‡∏µ‡πà **‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ TLS ‚Äì ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡∏∑‡πà‡∏≠ DNS ‡∏Ç‡∏≠‡∏á Tailscale ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô Cert ‡∏Ç‡∏≠‡∏á RKE2**

## ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Kube API Server ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠ DNS ‡∏Ç‡∏≠‡∏á Tailscale

‡∏à‡∏≤‡∏Å‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏≤‡∏£‡∏π‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡πà‡∏≤ `kubectl` ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ú‡πà‡∏≤‡∏ô DNS ‡∏Ç‡∏≠‡∏á Tailscale ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ **cert ‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ**

‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡∏Ñ‡∏∑‡∏≠‚Ä¶
‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á **‡πÄ‡∏û‡∏¥‡πà‡∏° DNS ‡∏Ç‡∏≠‡∏á Tailscale (`thadawth.tail1234da.ts.net`) ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô TLS certificate ‡∏Ç‡∏≠‡∏á RKE2**
‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏£‡∏≤‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå config ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ RKE2 regenerate cert ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏±‡∏ö

### 1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏ü‡∏•‡πå config.yaml ‡∏Ç‡∏≠‡∏á RKE2

RKE2 ‡∏à‡∏∞‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ:

```
/etc/rancher/rke2/config.yaml
```

‡∏ñ‡πâ‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢:

```bash
sudo mkdir -p /etc/rancher/rke2
sudo nano /etc/rancher/rke2/config.yaml
```

‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ (‡πÄ‡∏û‡∏¥‡πà‡∏° DNS ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏á‡πÑ‡∏õ):

```yaml
tls-san:
  - "192.168.1.107"
  - "thadawth.tail1234da.ts.net"
```

‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÅ‡∏£‡∏Å‡∏Ñ‡∏∑‡∏≠ IP ‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á‡∏Ñ‡∏∑‡∏≠ DNS ‡∏à‡∏≤‡∏Å Tailscale ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ cert ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö

### 2. ‡∏•‡∏ö cert ‡πÄ‡∏Å‡πà‡∏≤ (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ RKE2 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà)

```bash
sudo systemctl stop rke2-server

sudo rm /var/lib/rancher/rke2/server/tls/serving-kube-apiserver.crt
sudo rm /var/lib/rancher/rke2/server/tls/serving-kube-apiserver.key
```

**‚ö†Ô∏è ‡∏£‡∏∞‡∏ß‡∏±‡∏á:** ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå `server-ca.key` ‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏≠‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡∏∑‡∏≠ root CA ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‡∏ñ‡πâ‡∏≤‡∏´‡∏≤‡∏¢ = cluster ‡∏û‡∏±‡∏á

### 3. Start RKE2 ‡πÉ‡∏´‡∏°‡πà ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á cert ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏° DNS ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

```bash
sudo systemctl start rke2-server
```

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏£‡∏≠‡πÉ‡∏´‡πâ cluster ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏° (`kubectl get nodes` ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á server)

### 4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö cert ‡πÉ‡∏´‡∏°‡πà

‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ `openssl` ‡∏î‡∏π‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ‡∏ß‡πà‡∏≤ DNS ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏´‡∏°:

```bash
openssl s_client -connect 127.0.0.1:6443 -showcerts </dev/null 2>/dev/null \
  | openssl x509 -noout -text | grep -A1 "Subject Alternative Name"
```

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô:

```
DNS:thadawth.tail1234da.ts.net
```

‡πÇ‡∏ú‡∏•‡πà‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ üéâ

### ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô‡∏ú‡πà‡∏≤‡∏ô DNS... ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° `thadawth.tail1234da.ts.net` ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô SAN ‡∏Ç‡∏≠‡∏á cert ‡πÅ‡∏•‡πâ‡∏ß
‡∏ú‡∏°‡∏Å‡πá‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Mac ‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á‡∏£‡∏±‡∏ô `kubectl get nodes` ‡∏ú‡πà‡∏≤‡∏ô context ‡∏ó‡∏µ‡πà‡∏ä‡∏µ‡πâ‡πÑ‡∏õ‡∏¢‡∏±‡∏á DNS ‡∏ô‡∏µ‡πâ

‡∏ú‡∏•‡∏Ñ‡∏∑‡∏≠... ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö

```bash
Unable to connect to the server: x509: certificate signed by unknown authority
```

‡∏ñ‡∏∂‡∏á‡πÅ‡∏°‡πâ cert ‡∏à‡∏∞‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠ DNS ‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡∏ù‡∏±‡πà‡∏á client (‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Mac) ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ ‚Äú‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‚Äù cert ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏î‡∏µ
‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÉ‡∏ô `kubeconfig.yaml` ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ ‡∏¢‡∏±‡∏á‡πÉ‡∏™‡πà `certificate-authority-data:` ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡πà‡∏ô‡πÄ‡∏≠‡∏á

## ‡πÉ‡∏ä‡πâ `certificate-authority-data` ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô DNS ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á

‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà cert ‡∏ù‡∏±‡πà‡∏á server ‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å `certificate-authority-data:` ‡∏ù‡∏±‡πà‡∏á client
‡πÉ‡∏ô `kubeconfig.yaml` ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà cert ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö CA ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ sign cert ‡∏ù‡∏±‡πà‡∏á server ‡∏à‡∏£‡∏¥‡∏á ‡πÜ

‡∏ã‡∏∂‡πà‡∏á‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏Ç‡∏≠‡∏á RKE2 ‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ cert ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà Kube API Server ‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
‡∏Ñ‡∏∑‡∏≠‡πÑ‡∏ü‡∏•‡πå `serving-kube-apiserver.crt` ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏û‡∏π‡∏î‡∏ñ‡∏∂‡∏á‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤

‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠ base64 cert ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÑ‡∏î‡πâ:

```bash
sudo cat /var/lib/rancher/rke2/server/tls/serving-kube-apiserver.crt | base64 | tr -d '\n'
```

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏≠‡∏≤‡∏Ñ‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô `kubeconfig.yaml` ‡∏ï‡∏£‡∏á `certificate-authority-data:`
‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á `kubectl get nodes` ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏≠‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢
‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πá‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠ cert ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢

## (Optional) ‡∏™‡∏£‡πâ‡∏≤‡∏á Account ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏≠‡∏Å‡∏ö‡πâ‡∏≤‡∏ô ‡πÅ‡∏ö‡∏ö Token

‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏ä‡πâ cert ‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà RKE2 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ï‡∏≠‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á
(‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏ô embed cert+key ‡πÅ‡∏ö‡∏ö root user ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `rke2.yaml`)
‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÅ‡∏¢‡∏Å context ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞...

‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á ServiceAccount ‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡πâ‡∏ß generate `kubeconfig.yaml` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö user ‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö

### 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á ServiceAccount ‡πÉ‡∏´‡∏°‡πà

‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ú‡∏°‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ `remote-admin`:

```bash
kubectl create serviceaccount remote-admin -n default
```

### 2. ‡πÉ‡∏´‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏ö‡∏ö admin (‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡∏à‡∏≥‡∏Å‡∏±‡∏î namespace ‡∏Å‡πá‡πÑ‡∏î‡πâ)

‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô user ‡∏´‡∏•‡∏±‡∏Å:

```bash
kubectl create clusterrolebinding remote-admin-binding \
  --clusterrole=cluster-admin \
  --serviceaccount=default:remote-admin
```

### 3. ‡∏™‡∏£‡πâ‡∏≤‡∏á token ‡πÅ‡∏ö‡∏ö short-lived (Kubernetes >= 1.24)

```bash
kubectl create token remote-admin -n default
```

‡∏°‡∏±‡∏ô‡∏à‡∏∞ print token ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏ó‡∏≤‡∏á stdout ‚Üí ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô

### 4. ‡∏î‡∏∂‡∏á `ca.crt` ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö certificate-authority-data

‡πÄ‡∏£‡∏≤‡πÄ‡∏Ñ‡∏¢‡πÑ‡∏î‡πâ base64 cert ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ:

```bash
sudo cat /var/lib/rancher/rke2/server/tls/serving-kube-apiserver.crt | base64 | tr -d '\n'
```

### 5. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `kubeconfig.yaml`

```yaml
apiVersion: v1
kind: Config
clusters:
- name: my-homelab_remote
  cluster:
    server: https://thadawth.tail1234da.ts.net:6443
    certificate-authority-data: <‡πÉ‡∏™‡πà base64 CA ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô>
users:
- name: remote-admin
  user:
    token: <‡πÉ‡∏™‡πà token ‡∏ó‡∏µ‡πà create ‡∏°‡∏≤‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô>
contexts:
- name: my-homelab_remote-context
  context:
    cluster: my-homelab_remote
    user: remote-admin
current-context: my-homelab_remote-context
```


### 6. ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô: scp ‡πÅ‡∏•‡∏∞ merge context

‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á remote (‡πÄ‡∏ä‡πà‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Mac) ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á Homelab ‡∏ú‡πà‡∏≤‡∏ô Tailscale
‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ:

#### 6.1 copy kubeconfig ‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Homelab

```bash
scp -i ~/.ssh/my_home_lab/id_rsa \
    thadawth@thadawth.tail1234da.ts.net:/home/thadawth/scripts/remote-kubeconfig.yaml \
    ./remote-kubeconfig.yaml
```

#### 6.2 merge context ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö \~/.kube/config ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà

```bash
KUBECONFIG=~/.kube/config:./remote-kubeconfig.yaml kubectl config view --flatten > merged-config.yaml
mv ~/.kube/config ~/.kube/config.backup.$(date +%Y%m%d-%H%M%S)
mv merged-config.yaml ~/.kube/config
```

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏ä‡πá‡∏Å‡∏î‡∏π‡∏ß‡πà‡∏≤ context ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á:

```bash
kubectl config get-contexts
```

‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠ context ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ ‡πÄ‡∏ä‡πà‡∏ô `my-homelab_remote-context`
‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏Å‡πá‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏•‡∏±‡∏ö context ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ:

```bash
kubectl config use-context my-homelab_remote-context
kubectl get nodes
```

‡πÅ‡∏Ñ‡πà‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ `kubectl` ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏¢‡∏±‡∏á cluster ‡∏ó‡∏µ‡πà‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö
‡∏ú‡πà‡∏≤‡∏ô domain ‡∏Ç‡∏≠‡∏á Tailscale ‡πÅ‡∏ö‡∏ö‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡πÅ‡∏¢‡∏Å context ‡πÑ‡∏î‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô üéØ

‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö‡∏°‡∏≤‡∏¢!
‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ **‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 6: Token ‡∏Å‡∏±‡∏ö Cert-based auth ‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤? ‡πÅ‡∏•‡∏∞ RKE2 ‡πÉ‡∏ä‡πâ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å?**
‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏•‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢ ‡πÜ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ô‡πâ‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£ ‡πÅ‡∏ï‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏≥ Homelab ‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á

## Token vs Cert-based auth ‚Äì ‡∏≠‡∏∞‡πÑ‡∏£‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏±‡∏ô?

‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏≠‡∏Å‡∏ö‡πâ‡∏≤‡∏ô ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏à‡∏≠‡πÅ‡∏ô‡πà ‡πÜ ‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏¢
‡∏à‡∏∞‡πÉ‡∏ä‡πâ token ‡∏î‡∏µ‡∏°‡∏±‡πâ‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∞ generate cert-based user ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤?

‡πÉ‡∏ô Kubernetes ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏µ‡πâ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‚Äù ‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà
‡πÅ‡∏ï‡πà‡∏û‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏∞‡∏°‡∏µ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏û‡∏≠‡∏™‡∏°‡∏Ñ‡∏ß‡∏£

**Token-based auth** ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö `kubectl create token` ‡∏à‡∏∞‡∏≠‡∏≠‡∏Å token ‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô string ‡∏¢‡∏≤‡∏ß ‡πÜ ‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô kubeconfig ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏Ñ‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á key-pair ‡∏´‡∏£‡∏∑‡∏≠ cert ‡πÉ‡∏î ‡πÜ
‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö automation, bot, ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡πÉ‡∏ô script

‡πÅ‡∏ï‡πà‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏Ñ‡∏∑‡∏≠... ‡∏ñ‡πâ‡∏≤ token ‡∏ô‡∏µ‡πâ‡∏£‡∏±‡πà‡∏ß ‡∏Å‡πá‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ñ‡∏π‡∏Å‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
‡πÅ‡∏•‡∏∞‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô static token ‡∏°‡∏±‡∏ô‡∏°‡∏±‡∏Å‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏î‡πâ‡∏ß‡∏¢

‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ projected token ‡∏´‡∏£‡∏∑‡∏≠ short-lived token ‡∏ó‡∏µ‡πà Kubernetes version ‡πÉ‡∏´‡∏°‡πà ‡πÜ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö
(‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏´‡∏•‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤)

**Cert-based auth** ‡∏à‡∏∞‡πÉ‡∏ä‡πâ public/private keypair
‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å cert ‡πÇ‡∏î‡∏¢ CA ‡∏Ç‡∏≠‡∏á cluster (‡∏´‡∏£‡∏∑‡∏≠ external CA) ‡πÅ‡∏•‡πâ‡∏ß‡∏ù‡∏±‡∏á‡∏•‡∏á‡πÉ‡∏ô kubeconfig
‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏∞ revoke ‡∏Å‡πá‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏ù‡∏±‡πà‡∏á server ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå token ‡∏ó‡∏µ‡πà‡∏ù‡∏±‡πà‡∏á user

‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏Ñ‡∏∑‡∏≠‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏π‡∏á ‡πÉ‡∏ä‡πâ TLS ‡∏£‡∏∞‡∏î‡∏±‡∏ö x509 ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô
‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á username, group, ‡∏´‡∏£‡∏∑‡∏≠ cert fingerprint ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢

‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏Ñ‡∏∑‡∏≠‡∏°‡∏±‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏¢‡∏∏‡πà‡∏á‡∏Å‡∏ß‡πà‡∏≤ ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ cert ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
‡πÅ‡∏•‡∏∞‡∏ñ‡πâ‡∏≤ private key ‡∏£‡∏±‡πà‡∏ß ‡∏Å‡πá‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≤‡∏á‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡∏±‡∏ö token ‡∏ó‡∏µ‡πà‡∏£‡∏±‡πà‡∏ß‡πÄ‡∏ä‡πà‡∏ô‡∏Å‡∏±‡∏ô

### ‡πÅ‡∏•‡πâ‡∏ß RKE2 ‡πÉ‡∏ä‡πâ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏õ‡πá‡∏ô default?

‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏∑‡∏≠ **cert-based auth**

‡∏ï‡∏≠‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á RKE2 ‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏°‡∏±‡∏ô‡∏à‡∏∞ generate cert ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö user ‡∏ä‡∏∑‡πà‡∏≠ `kubernetes-admin` ‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏≤‡∏á‡∏Å‡∏£‡∏ì‡∏µ‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô `rke2-default`
‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á kubeconfig ‡∏ó‡∏µ‡πà‡∏ù‡∏±‡∏á `client-certificate-data` ‡∏Å‡∏±‡∏ö `client-key-data` ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏¢
‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°

‡∏ú‡∏°‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏µ‡πà RKE2 ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ cert ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏ô ‚Äú‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏∂‡πà‡∏á external auth system‚Äù
‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡πÉ‡∏ô context ‡∏Ç‡∏≠‡∏á Homelab ‡∏´‡∏£‡∏∑‡∏≠ air-gapped environment ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö Azure AD ‡∏´‡∏£‡∏∑‡∏≠ OIDC

‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏°‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠

* ‡πÉ‡∏ä‡πâ cert-based ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° cluster
* ‡πÉ‡∏ä‡πâ token-based ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö automation ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏¥‡∏à

## ‡∏™‡∏£‡∏∏‡∏õ: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° RKE2 ‡∏ú‡πà‡∏≤‡∏ô Tailscale ‡πÅ‡∏ö‡∏ö‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡∏â‡∏ö‡∏±‡∏ö Homelab

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≠‡∏ö ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ú‡∏°‡∏Å‡πá‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° `kubectl` ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ RKE2 ‡∏ó‡∏µ‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô Tailscale ‡πÑ‡∏î‡πâ‡πÅ‡∏ö‡∏ö‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏∞‡∏ö‡∏ö

‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏à‡∏∞‡∏á‡πà‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£ ‚Äú‡πÅ‡∏Ñ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å local IP ‡πÄ‡∏õ‡πá‡∏ô DNS‚Äù ‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á TLS, cert, SAN, ‡πÅ‡∏•‡∏∞ auth ‡∏≠‡∏¢‡∏π‡πà‡∏û‡∏≠‡∏™‡∏°‡∏Ñ‡∏ß‡∏£
‡πÅ‡∏ï‡πà‡∏û‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏¢‡∏≤‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏¥‡∏î‡∏Ñ‡∏£‡∏±‡∏ö

‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ú‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏≤‡∏Å‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠:

* **Tailscale ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô network ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å** ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ router ‡∏´‡∏£‡∏∑‡∏≠ port forwarding ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏•‡∏¢
* ‡πÅ‡∏Ñ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å local IP ‡πÄ‡∏õ‡πá‡∏ô DNS ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏≠ **‡∏ï‡πâ‡∏≠‡∏á regenerate cert ‡∏Ç‡∏≠‡∏á Kube API Server ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠ DNS ‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢**
* ‡∏ñ‡πâ‡∏≤ `certificate-authority-data` ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö CA ‡∏ó‡∏µ‡πà‡πÄ‡∏ã‡πá‡∏ô cert ‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏Å‡πá‡∏à‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏ñ‡∏∂‡∏á‡πÅ‡∏°‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏∞ match ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏ï‡∏≤‡∏°
* ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á `ServiceAccount` ‡πÅ‡∏¢‡∏Å user ‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏Å token ‡πÉ‡∏´‡∏°‡πà ‡∏Å‡πá‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏£‡πå cert ‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏ù‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
* **cert-based auth ‡∏Å‡∏±‡∏ö token-based auth ‡∏°‡∏µ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô**
  ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏±‡∏ö user ‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ cert
  ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏¥‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ô script ‡∏ó‡∏µ‡πà rotate ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡∏Å‡πá‡πÉ‡∏ä‡πâ token ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢

‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ access cluster ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≤‡∏° device ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
Tailscale + RKE2 + ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å `kubeconfig` ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÑ‡∏î‡πâ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏°‡∏≤‡∏Å ‡πÜ ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Homelab

‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ üôå ‡πÉ‡∏Ñ‡∏£‡∏ó‡∏≥ Homelab ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô ‡∏•‡∏≠‡∏á‡πÅ‡∏ä‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö üòé
