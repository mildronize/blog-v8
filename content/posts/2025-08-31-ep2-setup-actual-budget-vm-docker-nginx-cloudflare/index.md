+++
title = "‡∏•‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏£‡∏¥‡∏á: Setup Actual Budget ‡∏ö‡∏ô VM ‡∏î‡πâ‡∏ß‡∏¢ Docker, Nginx ‡πÅ‡∏•‡∏∞ Cloudflare - EP2"
date = "2025-08-31"

[taxonomies]
categories = [ "DevOps" ]
tags = [ "SSL", "Actual Budget", "HTTPS", "Certificate", "Cloudflare", "Azure", "Nginx"]
+++

{% note(header="Series SSL/TLS ‡∏Å‡∏±‡∏ö Cloudflare") %}
- EP 1: [‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à SSL/TLS ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏ú‡πà‡∏≤‡∏ô Cloudflare ‡πÅ‡∏•‡∏∞¬†Azure](/posts/2025-08-23-ssl-tls-made-easy-cloudflare-azure/)
- EP 2: ‡∏•‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏£‡∏¥‡∏á: Setup Actual Budget ‡∏ö‡∏ô VM ‡∏î‡πâ‡∏ß‡∏¢ Docker, Nginx ‡πÅ‡∏•‡∏∞ Cloudflare (‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏µ‡πâ)
{% end %}



‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡πá‡∏à‡∏∞‡∏°‡∏≤‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô‡πÉ‡∏ô **EP2** ‡∏Ç‡∏≠‡∏á‡∏ã‡∏µ‡∏£‡∏µ‡∏™‡πå SSL/TLS ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÑ‡∏ß‡πâ‡∏Å‡∏±‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ñ‡πâ‡∏≤‡πÉ‡∏Ñ‡∏£‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏û‡∏≠‡πÄ‡∏´‡πá‡∏ô‡∏†‡∏≤‡∏û‡∏Å‡∏ß‡πâ‡∏≤‡∏á ‡πÜ ‡∏ß‡πà‡∏≤ HTTPS ‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á ‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Cloudflare ‡∏Å‡∏±‡∏ö Azure ‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ Managed Service ‡∏´‡∏£‡∏∑‡∏≠ VM ‡πÄ‡∏≠‡∏á‡πÄ‡∏ô‡∏µ‡πà‡∏¢ ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á certificate ‡∏à‡∏∞‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á ‡πÅ‡∏ï‡πà‡∏û‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏£‡∏≤‡∏ß‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏•‡∏≠‡∏á ‚Äú‡∏•‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏£‡∏¥‡∏á‚Äù ‡∏Å‡∏±‡∏ô‡∏î‡∏π‡∏ö‡πâ‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡∏ö

‡πÉ‡∏ô EP2 ‡∏ô‡∏µ‡πâ ‡∏ú‡∏°‡∏à‡∏∞‡πÄ‡∏≠‡∏≤‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÄ‡∏•‡πá‡∏Å ‡πÜ ‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ **Actual Budget** ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô open-source budgeting app ‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‡∏ö‡∏ô VM ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÄ‡∏≠‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏Ñ‡∏£‡∏≠‡∏ö‡∏°‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ **Nginx + Cloudflare Origin Certificate** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ‡πÇ‡∏´‡∏°‡∏î Full (Strict) ‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‚Ä¶ ‡∏à‡∏≤‡∏Å VM ‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤ ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏Ñ‡πà‡∏≠‡∏¢ ‡πÜ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡∏ó‡∏µ‡πà‡∏°‡∏µ HTTPS ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á ‚ú®

{% tip(header="Source Code") %}
‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏Ñ‡∏£‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏•‡∏≠‡∏á‡∏ó‡∏≥‡∏ï‡∏≤‡∏° ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á config ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà GitHub repo ‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö: [https://github.com/thaitype/actualbudget-vm-cloudflare](https://github.com/thaitype/actualbudget-vm-cloudflare)
{% end %}

‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏ú‡∏°‡πÄ‡∏≠‡∏á‡∏Å‡πá‡πÄ‡∏Ñ‡∏¢‡πÑ‡∏î‡πâ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ **YNAB (You Need A Budget)** ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß ‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏≠‡∏Å‡πÄ‡∏•‡∏¢‡∏ß‡πà‡∏≤‡∏°‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏°‡πÑ‡∏õ‡∏û‡∏≠‡∏™‡∏°‡∏Ñ‡∏ß‡∏£ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡∏ö‡πà‡∏≠‡∏¢ ‡πÜ ‡∏≠‡∏¢‡πà‡∏≤‡∏á ‚Äú‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÑ‡∏´‡∏ô‚Äù, ‚Äú‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏á‡∏ö‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏î‡∏µ‚Äù, ‡∏´‡∏£‡∏∑‡∏≠ ‚Äú‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏á‡∏ö‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô‚Äù ‚Äî ‡∏û‡∏≠‡∏°‡∏≤‡πÉ‡∏ä‡πâ YNAB ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà **‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞‡∏°‡∏≤‡∏Å** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÅ‡∏≠‡∏õ‡∏°‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏Å ‚Äú‡∏ó‡∏∏‡∏Å‡∏ö‡∏≤‡∏ó‡∏ó‡∏∏‡∏Å‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå‡∏°‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏õ‚Äù

‡πÅ‡∏ï‡πà‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏°‡∏±‡∏ô‡∏™‡∏π‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏° üòÖ ‡∏à‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ú‡∏°‡∏°‡∏≤‡πÄ‡∏à‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ **Actual Budget** ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô open-source ‡∏ó‡∏µ‡πà‡∏´‡∏¢‡∏¥‡∏ö‡πÄ‡∏≠‡∏≤‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ü‡∏£‡∏µ ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏Æ‡∏™‡∏ï‡πå‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ ‡πÉ‡∏Ñ‡∏£‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥ ‚Äú‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‚Äù ‡πÅ‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á ‡∏ú‡∏°‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö‡∏ß‡πà‡∏≤‡∏•‡∏≠‡∏á Actual Budget ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ VM ‡∏ö‡∏ô Azure, DigitalOcean, fly.io ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡πÑ‡∏´‡∏ô‡∏Å‡πá‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡πà‡∏ñ‡∏ô‡∏±‡∏î‡πÄ‡∏•‡∏¢ ‡πÅ‡∏ï‡πà‡πÉ‡∏ô‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡∏ú‡∏°‡∏à‡∏∞‡∏Ç‡∏≠‡πÉ‡∏ä‡πâ **Azure VM** ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≤‡∏ò‡∏¥‡∏ï‡∏Ñ‡∏£‡∏±‡∏ö

## 1. ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° VM

‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏±‡∏Å‡∏´‡∏•‡∏±‡∏á ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÄ‡∏•‡∏¢‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ ‚Äú‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô‡πÄ‡∏õ‡∏•‡πà‡∏≤‚Äù ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏•‡∏á‡πÄ‡∏™‡∏≤‡πÄ‡∏Ç‡πá‡∏°‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö? ‡πÇ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏Å‡πá‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢ ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡∏∑‡∏≠ **VM ‡πÄ‡∏õ‡∏•‡πà‡∏≤ ‡πÜ** ‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏≠‡∏≤‡∏ö‡πâ‡∏≤‡∏ô (‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏≠‡∏õ Actual Budget ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤) ‡πÑ‡∏õ‡∏•‡∏á‡∏ö‡∏ô‡∏°‡∏±‡∏ô

‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏ú‡∏°‡∏à‡∏∞‡πÉ‡∏ä‡πâ **Azure VM** ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å ‡πÅ‡∏ï‡πà‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å DigitalOcean, AWS ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô ‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏ô‡∏±‡∏î‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ô‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ñ‡∏∑‡∏≠ VM ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô Linux (Ubuntu 20.04/22.04) ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô ‚Äú‡∏î‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ‚Äù ‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏•‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡πÜ

‡∏û‡∏≠‡πÑ‡∏î‡πâ VM ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ú‡πà‡∏≤‡∏ô SSH ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏Å‡∏ß‡∏≤‡∏î‡∏•‡∏≤‡∏ô‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ (update system) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏∞‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏Ñ‡∏£‡∏±‡∏ö

### ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ VM ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ Managed Service?

‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô‡∏≠‡∏≤‡∏à‡∏™‡∏á‡∏™‡∏±‡∏¢‡∏ß‡πà‡∏≤‚Ä¶ ‡∏ó‡∏≥‡πÑ‡∏°‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡∏¢‡∏∏‡πà‡∏á‡∏¢‡∏≤‡∏Å‡πÄ‡∏ä‡πà‡∏≤ VM ‡πÄ‡∏≠‡∏á ‡∏ó‡∏±‡πâ‡∏á ‡πÜ ‡∏ó‡∏µ‡πà Azure ‡∏´‡∏£‡∏∑‡∏≠ Cloud Provider ‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡∏Å‡πá‡∏°‡∏µ‡∏û‡∏ß‡∏Å Managed Service ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô ‡πÄ‡∏ä‡πà‡∏ô Azure App Service, Azure Container App ‡∏≠‡∏∞‡πÑ‡∏£‡∏û‡∏ß‡∏Å‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡πÅ‡∏ñ‡∏° HTTPS ‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏¢ ‡πÅ‡∏ï‡πà‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏´‡∏•‡∏±‡∏Å ‡πÜ ‡∏°‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö

**Actual Budget ‡πÉ‡∏ä‡πâ SQLite ‡πÄ‡∏õ‡πá‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å** ‡∏ã‡∏∂‡πà‡∏á SQLite ‡∏à‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏•‡∏á‡∏î‡∏¥‡∏™‡∏Å‡πå‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á ‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏≠‡∏õ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡∏°‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ **mount volume ‡πÅ‡∏ö‡∏ö native** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡πà‡∏≤‡∏ô‚Äì‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥

‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏∑‡∏≠ Managed Service ‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏û‡∏ß‡∏Å PaaS (Platform-as-a-Service) ‡∏Ç‡∏≠‡∏á Azure ‡∏à‡∏∞‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ **Azure Files** ‡∏´‡∏£‡∏∑‡∏≠ storage ‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô network file system ‡πÅ‡∏ó‡∏ô ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ support ‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á SQLite ‡πÅ‡∏ö‡∏ö 100% ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ñ‡∏∑‡∏≠‚Ä¶ ‡∏û‡∏≠‡πÄ‡∏£‡∏≤‡πÑ‡∏õ deploy ‡∏à‡∏£‡∏¥‡∏á ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏à‡∏≠ error ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏¢:

```
[Error: PRAGMA journal_mode = WAL - SQLITE_BUSY: database is locked]
```

‡∏ã‡∏∂‡πà‡∏á‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ SQLite ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏´‡∏°‡∏î WAL (Write-Ahead Logging) ‡πÅ‡∏ï‡πà‡∏î‡∏±‡∏ô‡∏•‡πá‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ storage ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏ï‡πá‡∏° ‡πÜ

‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÅ‡∏´‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ **VM** ‡∏´‡∏£‡∏∑‡∏≠ service ‡∏ó‡∏µ‡πà support **native filesystem mount** ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡πÄ‡∏ä‡πà‡∏ô Azure VM, DigitalOcean Droplet, ‡∏´‡∏£‡∏∑‡∏≠ AWS EC2 ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ SQLite ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á database lock

‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏Ñ‡∏∑‡∏≠‚Ä¶ ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ Actual Budget ‡∏£‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏•‡∏∑‡πà‡∏ô ‡πÜ ‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏ô‡∏±‡πà‡∏á‡∏õ‡∏ß‡∏î‡∏´‡∏±‡∏ß‡∏Å‡∏±‡∏ö error ‡πÅ‡∏õ‡∏•‡∏Å ‡πÜ ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏≠‡∏°‡πÑ‡∏õ‡πÄ‡∏ä‡πà‡∏≤ VM ‡∏°‡∏≤ ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ environment ‡πÄ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ñ‡∏£‡∏±‡∏ö

## 2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Docker & Docker Compose

‡∏û‡∏≠‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ VM ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô‡πÄ‡∏õ‡∏•‡πà‡∏≤ ‡πÜ ‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£ ‚Äú‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡πâ‡∏≤‡∏ô‚Äù ‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏õ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏ï‡πà‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏õ‡∏•‡∏á‡πÄ‡∏™‡∏≤ ‡πÄ‡∏ó‡∏õ‡∏π‡∏ô ‡∏Å‡πà‡∏≠‡∏≠‡∏¥‡∏ê‡∏ó‡∏µ‡∏•‡∏∞‡∏Å‡πâ‡∏≠‡∏ô (‡∏•‡∏á dependency ‡πÄ‡∏≠‡∏á, ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á runtime ‡πÄ‡∏≠‡∏á) ‚Ä¶‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡∏á‡πà‡∏≤‡∏¢‡∏Å‡∏ß‡πà‡∏≤ ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏Å **‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ** ‡∏°‡∏≤‡∏•‡∏á‡πÑ‡∏õ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö

‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ **Docker** ‡∏ô‡∏±‡πà‡∏ô‡πÄ‡∏≠‡∏á ‚Äî ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏û‡πá‡∏Å Actual Budget, Nginx, ‡πÅ‡∏•‡∏∞ service ‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô container ‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏≠‡∏≤‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏•‡∏á‡∏ö‡∏ô VM ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏´‡πà‡∏ß‡∏á‡∏ß‡πà‡∏≤ dependency ‡∏à‡∏∞‡∏ä‡∏ô‡∏Å‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ú‡∏¥‡∏î‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô

‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ ‡πÄ‡∏£‡∏≤‡∏¢‡∏±‡∏á‡∏°‡∏µ **Docker Compose** ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÅ‡∏õ‡∏•‡∏ô‡∏ö‡πâ‡∏≤‡∏ô ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ö‡∏≠‡∏Å‡πÑ‡∏ß‡πâ‡πÄ‡∏•‡∏¢‡∏ß‡πà‡∏≤ ‚Äú‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ Nginx, ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ Actual Budget, ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏ï‡πà‡∏≠‡πÑ‡∏ü‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö database‚Äù ‚Äî ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ô‡∏¥‡∏¢‡∏≤‡∏°‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `docker-compose.yml` ‡∏û‡∏≠‡πÄ‡∏£‡∏≤‡∏™‡∏±‡πà‡∏á `docker compose up -d` ‡∏°‡∏±‡∏ô‡∏Å‡πá‡∏à‡∏∞‡∏¢‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏•‡∏¢

‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏õ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ config ‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÉ‡∏ô VM ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∑‡∏≠:

1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Docker
2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Docker Compose
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á (`docker --version`, `docker compose version`)

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞ ‚Äú‡πÄ‡∏≠‡∏≤‡∏Ç‡∏≠‡∏á‡πÑ‡∏õ‡∏•‡∏á‡∏ö‡πâ‡∏≤‡∏ô‚Äù ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

## 3. Config Environment ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Actual Budget

‡πÇ‡∏≠‡πÄ‡∏Ñ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏°‡∏µ VM (‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô) + Docker/Compose (‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ) ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡∏ó‡∏µ‡∏ô‡∏µ‡πâ‡∏Å‡πá‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏≤ **‡∏à‡∏±‡∏î‡∏´‡πâ‡∏≠‡∏á ‡∏à‡∏±‡∏î‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå** ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏Å‡∏±‡∏ô

‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Actual Budget ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£ **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ environment** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏£‡∏≤‡∏ß‡πà‡∏≤ ‚Äú‡∏´‡πâ‡∏≠‡∏á‡πÑ‡∏´‡∏ô‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏∞‡πÑ‡∏£‚Äù ‡πÄ‡∏ä‡πà‡∏ô URL ‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡πá‡∏ö, ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏î‡πÄ‡∏°‡∏ô, ‡πÅ‡∏•‡∏∞ proxy ‡∏ó‡∏µ‡πà‡πÑ‡∏ß‡πâ‡∏£‡∏±‡∏ö request ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å

‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡πá‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏Ñ‡∏£‡∏±‡∏ö:

1. ‡πÄ‡∏£‡∏≤ clone ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏´‡∏•‡∏î template ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏à‡∏≤‡∏Å GitHub ‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô [https://github.com/thaitype/actualbudget-vm-cloudflare](https://github.com/thaitype/actualbudget-vm-cloudflare)

2. ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô copy ‡πÑ‡∏ü‡∏•‡πå `.env.example` ‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô `.env` ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏≤‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ä‡∏∏‡∏î

3. ‡πÄ‡∏õ‡∏¥‡∏î `.env` ‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô:

   * `ACTUAL_BASE_URL=https://actual-budget.mydomain.com`
   * `ACTUAL_SERVER_HOSTNAME=actual-budget.mydomain.com`
   * `TRUSTED_PROXIES` (‡πÉ‡∏Ñ‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ú‡πà‡∏≤‡∏ô proxy ‡πÑ‡∏î‡πâ)

4. ‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÉ‡∏ô config ‡∏Ç‡∏≠‡∏á Nginx (`default.conf`) ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÇ‡∏î‡πÄ‡∏°‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏î‡πâ‡∏ß‡∏¢ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏µ‡∏Ñ‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå `https://actual-budget.mydomain.com` ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏´‡∏≤ container ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£ **‡∏à‡∏±‡∏î‡∏´‡πâ‡∏≠‡∏á + ‡∏ï‡∏±‡πâ‡∏á‡∏õ‡πâ‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á** ‡∏ß‡πà‡∏≤ ‚Äú‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ß‡∏ô‡∏∞, ‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏ô‡∏∞‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏°‡∏±‡∏ô‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏Å‡∏±‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

‡∏û‡∏≠‡πÄ‡∏£‡∏≤‡∏ó‡∏≥ config ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡πá‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏∞‡∏Ç‡∏ô‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå (service ‡∏à‡∏£‡∏¥‡∏á) ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö

## 3.1 Architecture Overview: Cloudflare + Nginx + Actual Budget

‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏õ‡∏Ç‡∏≠ Certificate ‡∏à‡∏≤‡∏Å Cloudflare ‡∏ú‡∏°‡∏≠‡∏¢‡∏≤‡∏Å‡∏ä‡∏ß‡∏ô‡∏°‡∏≤‡∏î‡∏π **‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô** ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏Å‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ß‡πà‡∏≤ Nginx ‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏∞‡πÑ‡∏£ ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Cloudflare ‡∏Å‡∏±‡∏ö Actual Budget

‡∏•‡∏≠‡∏á‡∏ô‡∏∂‡∏Å‡∏†‡∏≤‡∏û‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ **‡∏£‡∏õ‡∏†.** (Cloudflare) ‡∏¢‡∏∑‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡πÉ‡∏´‡∏ç‡πà ‡πÉ‡∏Ñ‡∏£‡∏à‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô‡∏ï‡∏∂‡∏Å‡∏Å‡πá‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏£‡∏õ‡∏†.‡∏Å‡πà‡∏≠‡∏ô ‡∏ï‡∏£‡∏ß‡∏à‡∏ö‡∏±‡∏ï‡∏£ ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÅ‡∏•‡πâ‡∏ß‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏∂‡∏Å

‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢ ‡πÜ ‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö

* **User** ‚Üí ‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô‡∏ï‡∏∂‡∏Å ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö `https://actual-budget.mydomain.com`
* **Cloudflare Proxy** ‚Üí ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏õ‡∏†. ‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏£‡∏Å ‡∏Ñ‡∏≠‡∏¢‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö request ‡∏ß‡πà‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å bot ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤, ‡∏°‡∏µ DDoS ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤, ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢ terminate TLS ‡πÅ‡∏£‡∏Å‡πÉ‡∏´‡πâ
* **Nginx (‡∏ö‡∏ô VM)** ‚Üí ‡∏Ñ‡∏∑‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡πÉ‡∏ô‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≠‡∏¢‡∏£‡∏±‡∏ö request ‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å Cloudflare ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏ï‡πà‡∏≤‡∏á ‡πÜ ‡πÉ‡∏ô‡∏ï‡∏∂‡∏Å (service ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô VM)
* **Actual Budget Container** ‚Üí ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏ï‡∏∂‡∏Å ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≠‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö

‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô flow ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö:

![](architecture.jpg)

* ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏ö‡∏ö HTTPS ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏°‡∏≤‡∏ñ‡∏∂‡∏á Cloudflare
* Cloudflare ‡πÄ‡∏õ‡∏¥‡∏î connection ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡∏´‡∏≤ VM ‡∏ú‡πà‡∏≤‡∏ô HTTPS ‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö ‡πÇ‡∏î‡∏¢‡πÄ‡∏ä‡πá‡∏Å certificate ‡∏Ç‡∏≠‡∏á Nginx (‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ Origin CA ‡∏ó‡∏µ‡πà Cloudflare ‡∏≠‡∏≠‡∏Å‡πÉ‡∏´‡πâ)
* Nginx ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô reverse proxy ‚Üí ‡∏£‡∏±‡∏ö request ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á container ‡∏Ç‡∏≠‡∏á Actual Budget ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Docker

**Key Point:**
Nginx ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ó‡∏ô Cloudflare ‡πÅ‡∏ï‡πà‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô **‚Äú‡∏ù‡∏±‡πà‡∏á‡∏£‡∏±‡∏ö‚Äù** ‡∏Ç‡∏≠‡∏á certificate ‡∏ó‡∏µ‡πà Cloudflare ‡πÑ‡∏ß‡πâ‡πÉ‡∏à ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢ forward traffic ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÅ‡∏≠‡∏õ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á


‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏≤‡πÑ‡∏õ‡∏Ç‡∏≠ Cloudflare Origin Certificate ‡∏ú‡∏π‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ß‡πà‡∏≤‡∏°‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠ cert ‡∏°‡∏≤‡πÅ‡∏õ‡∏∞‡∏°‡∏±‡πà‡∏ß ‡πÜ ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£ ‚Äú‡∏ó‡∏≥‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏ö‡πâ‡∏≤‡∏ô‚Äù ‡∏ó‡∏µ‡πà Cloudflare ‡πÅ‡∏•‡∏∞ Nginx ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö


## 4. ‡∏Ç‡∏≠ Cloudflare Origin Certificate

‡πÇ‡∏≠‡πÄ‡∏Ñ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏û‡∏≠‡πÄ‡∏£‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à Architecture ‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡πà‡∏≤ Cloudflare ‚Üí Nginx ‚Üí Actual Budget ‡∏°‡∏±‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á ‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ñ‡∏±‡∏î‡∏°‡∏≤‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ **‚Äú‡∏ó‡∏≥‡πÉ‡∏´‡πâ Cloudflare ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏ô Nginx ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‚Äù**

‡πÇ‡∏î‡∏¢‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏°‡∏µ HTTPS ‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡∏™‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:

1. **‡πÉ‡∏ä‡πâ Certificate ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏à‡∏≤‡∏Å CA**

   * ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏ü‡∏£‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á **Let‚Äôs Encrypt** ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏ï‡∏±‡∏á‡∏Ñ‡πå‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á DigiCert, Sectigo ‡∏Ø‡∏•‡∏Ø
   * ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏Ñ‡∏∑‡∏≠ cert ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ **browser ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏Å‡πá‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ** ‡πÄ‡∏ß‡∏•‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏ï‡∏£‡∏á‡∏°‡∏≤‡∏ó‡∏µ‡πà origin (‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô Cloudflare) ‡∏Å‡πá‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ warning ‡πÉ‡∏î ‡πÜ
   * ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏Ñ‡∏∑‡∏≠ Let‚Äôs Encrypt ‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô (90 ‡∏ß‡∏±‡∏ô) ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢ ‡πÜ ‡∏™‡πà‡∏ß‡∏ô cert ‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡πá‡πÅ‡∏û‡∏á‡∏Å‡∏ß‡πà‡∏≤

2. **‡πÉ‡∏ä‡πâ Cloudflare Origin Certificate**

   * Cloudflare ‡∏≠‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á **Cloudflare ‚Üî Origin Server (Nginx/VM)** ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
   * ‡∏≠‡∏≤‡∏¢‡∏∏‡∏¢‡∏≤‡∏ß‡∏°‡∏≤‡∏Å (default 15 ‡∏õ‡∏µ) ‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏ß‡∏î‡∏´‡∏±‡∏ß‡∏Ñ‡∏≠‡∏¢ renew ‡∏ö‡πà‡∏≠‡∏¢ ‡πÜ
   * ‡πÅ‡∏ï‡πà cert ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ **browser ‡∏õ‡∏Å‡∏ï‡∏¥‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠** ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏ï‡∏£‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà origin IP (‡∏à‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô warning) ‚Üí ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Cloudflare ‡πÉ‡∏ä‡πâ validate ‡∏Å‡∏±‡∏ö origin ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞
   * ‡∏ã‡∏∂‡πà‡∏á‡∏Å‡πá‡πÇ‡∏≠‡πÄ‡∏Ñ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô Cloudflare Proxy ‡πÄ‡∏™‡∏°‡∏≠

‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡πÄ‡∏•‡∏¢‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠:

* ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ **‡∏Ñ‡∏ô‡∏Å‡∏±‡∏ö browser ‡πÄ‡∏ä‡∏∑‡πà‡∏≠** ‚Üí ‡πÉ‡∏ä‡πâ Let‚Äôs Encrypt / CA ‡∏õ‡∏Å‡∏ï‡∏¥
* ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ **Cloudflare ‡πÄ‡∏ä‡∏∑‡πà‡∏≠** (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Full Strict) ‚Üí ‡πÉ‡∏ä‡πâ **Origin CA**

‡πÅ‡∏•‡∏∞‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Actual Budget ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏à‡∏∞‡∏ß‡∏¥‡πà‡∏á‡∏ú‡πà‡∏≤‡∏ô Cloudflare ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ **Origin Cert** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏†‡∏≤‡∏£‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏£‡∏±‡∏ö

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠ Origin Cert

1. ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Cloudflare Dashboard ‚Üí SSL/TLS ‚Üí Origin Server ‚Üí Create Certificate**
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å hostname ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô `actual-budget.mydomain.com`
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å key type: RSA
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å validity: default (15 ‡∏õ‡∏µ)
5. Cloudflare ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏™‡∏≠‡∏á‡∏≠‡∏±‡∏ô:

   * **Origin Certificate** ‚Üí ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô `origin.crt`
   * **Private Key** ‚Üí ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô `origin.key`

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏à‡∏∞‡πÄ‡∏≠‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô Nginx ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Cloudflare ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÅ‡∏ö‡∏ö Full Strict ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö

## 5. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Nginx (Reverse Proxy)

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏°‡∏µ VM (‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô), Docker (‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ), ‡πÅ‡∏•‡∏∞ Origin Certificate (‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏ó‡∏µ‡πà Cloudflare ‡∏≠‡∏≠‡∏Å‡πÉ‡∏´‡πâ) ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ **‚Äú‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‚Äù** ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≠‡∏¢‡∏£‡∏±‡∏ö‡πÅ‡∏Ç‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô‡∏ï‡∏∂‡∏Å ‚Üí ‡∏ô‡∏±‡πà‡∏ô‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ **Nginx** ‡∏Ñ‡∏£‡∏±‡∏ö

Nginx ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô **Reverse Proxy** ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏µ request ‡∏°‡∏≤‡∏à‡∏≤‡∏Å Cloudflare ‚Üí Nginx ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤ request ‡πÑ‡∏õ‡πÑ‡∏´‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ service ‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏ô (Actual Budget container) ‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ

‡∏•‡∏≠‡∏á‡∏ô‡∏∂‡∏Å‡∏†‡∏≤‡∏û‡∏á‡πà‡∏≤‡∏¢ ‡πÜ:

* Cloudflare = ‡∏£‡∏õ‡∏†. ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏∂‡∏Å
* Nginx = ‡πÄ‡∏Ñ‡∏≤‡∏ô‡πå‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö
* Actual Budget = ‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡πÉ‡∏ô

‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏ô (User) ‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ ‚Üí Cloudflare ‡∏ï‡∏£‡∏ß‡∏à‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ú‡πà‡∏≤‡∏ô ‚Üí ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö (Nginx) ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ ‚Äú‡∏≠‡πã‡∏≠ ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏õ‡∏´‡πâ‡∏≠‡∏á Actual Budget ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°? ‡πÄ‡∏ä‡∏¥‡∏ç‡∏ó‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏¢‚Äù ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á request ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

---

### Config Nginx

‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏´‡πâ Nginx ‡∏ü‡∏±‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏û‡∏≠‡∏£‡πå‡∏ï 80 (HTTP) ‡πÅ‡∏•‡∏∞ 443 (HTTPS)

* ‡∏û‡∏≠‡∏£‡πå‡∏ï 80: ‡πÅ‡∏Ñ‡πà redirect ‡∏ó‡∏∏‡∏Å request ‡πÑ‡∏õ‡∏ó‡∏µ‡πà HTTPS (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏™‡∏°‡∏≠)
* ‡∏û‡∏≠‡∏£‡πå‡∏ï 443: ‡∏ü‡∏±‡∏á‡∏î‡πâ‡∏ß‡∏¢ SSL (‡πÉ‡∏ä‡πâ Origin Cert ‡∏ó‡∏µ‡πà Cloudflare ‡∏≠‡∏≠‡∏Å‡πÉ‡∏´‡πâ) ‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏≥ proxy pass ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Actual Budget container

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á config (‡πÅ‡∏ö‡∏ö‡∏¢‡πà‡∏≠):

```nginx
server {
  listen 80;
  server_name actual-budget.mydomain.com;
  return 301 https://$host$request_uri;
}

server {
  listen 443 ssl http2;
  server_name actual-budget.mydomain.com;

  ssl_certificate     /etc/nginx/certs/actual-budget.mydomain.com/origin.crt;
  ssl_certificate_key /etc/nginx/certs/actual-budget.mydomain.com/origin.key;

  ssl_protocols TLSv1.2 TLSv1.3;
  ssl_ciphers HIGH:!aNULL:!MD5;

  location / {
    proxy_pass http://actual:5006;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
  }
}
```

‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ `proxy_pass http://actual:5006;` ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á Nginx ‡∏à‡∏∞‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠ traffic ‡πÑ‡∏õ‡∏¢‡∏±‡∏á container ‡∏Ç‡∏≠‡∏á Actual Budget ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡∏ö‡∏ô‡∏û‡∏≠‡∏£‡πå‡∏ï 5006

### Key Point ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à

* **Cloudflare ‚Üí Nginx** ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ HTTPS (Origin Cert)
* **Nginx ‚Üí Actual Budget Container** ‡πÉ‡∏ä‡πâ HTTP ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô VM ‡∏Å‡πá‡∏û‡∏≠ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏ô‡∏ß‡∏¥‡πà‡∏á‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢ local ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
* User ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ñ‡∏∂‡∏á Nginx ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡∏ß‡∏¥‡πà‡∏á‡∏ú‡πà‡∏≤‡∏ô Cloudflare ‡πÄ‡∏™‡∏°‡∏≠ ‚Üí ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢

‡∏û‡∏≠ config Nginx ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ ‚Äú‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏∂‡∏Å‚Äù ‡πÑ‡∏ß‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‡∏£‡∏≠‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÅ‡∏Ñ‡πà‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á (config ‡πÅ‡∏•‡∏∞ cert) ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡πÑ‡∏ß‡πâ‡∏ö‡∏ô VM ‡πÅ‡∏•‡πâ‡∏ß start ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á

## 5.1 Authenticated Origin Pulls (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏õ‡∏†. ‡∏™‡∏≠‡∏á‡∏ä‡∏±‡πâ‡∏ô)

‡∏ñ‡∏∂‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤ Nginx ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏°‡∏µ **Origin Certificate** ‡πÅ‡∏•‡πâ‡∏ß Cloudflare ‡∏Å‡πá‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏°‡∏≤‡∏î‡πâ‡∏ß‡∏¢ HTTPS ‡πÅ‡∏ö‡∏ö Full Strict ‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡πÉ‡∏ô‡∏ö‡∏≤‡∏á‡∏Å‡∏£‡∏ì‡∏µ ‡πÄ‡∏£‡∏≤‡∏¢‡∏±‡∏á‡∏≠‡∏≤‡∏à‡∏Å‡∏±‡∏á‡∏ß‡∏•‡∏≠‡∏¢‡∏π‡πà‡∏ß‡πà‡∏≤‚Ä¶ ‚Äú‡πÅ‡∏•‡πâ‡∏ß‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÉ‡∏Ñ‡∏£‡∏™‡∏±‡∏Å‡∏Ñ‡∏ô‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ç‡πâ‡∏≤‡∏° Cloudflare ‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏¥‡∏á HTTPS ‡∏ï‡∏£‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ó‡∏µ‡πà Nginx ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏•‡πà‡∏∞?‚Äù

‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏±‡∏ô‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏¢‡∏±‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ (‡∏ñ‡πâ‡∏≤‡∏£‡∏π‡πâ IP VM ‡∏ï‡∏£‡∏á ‡πÜ) ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Origin Cert ‡∏ñ‡∏π‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÉ‡∏´‡πâ Cloudflare ‡πÉ‡∏ä‡πâ ‡πÅ‡∏ï‡πà browser ‡∏õ‡∏Å‡∏ï‡∏¥‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏Å‡πá‡∏à‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô warning ‚Üí ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏Å‡πá‡∏ï‡∏≤‡∏° ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô attacker ‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏Ç‡πâ‡∏≤‡∏° Cloudflare ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ Nginx ‡∏Å‡πá‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏≠‡∏¢‡∏π‡πà

‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÅ‡∏´‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà **Authenticated Origin Pulls** ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### ‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

* Cloudflare ‡∏à‡∏∞‡∏™‡πà‡∏á **client certificate** ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ HTTPS ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
* Nginx (‡∏ù‡∏±‡πà‡∏á origin) ‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö cert ‡∏ô‡∏±‡πâ‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á Cloudflare ‡∏à‡∏£‡∏¥‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤
* ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà ‚Üí ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò connection ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤ **‚Äú‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô Cloudflare ‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏ô‡∏∞ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÉ‡∏Ñ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ï‡πà‡∏≠ HTTPS ‡∏°‡∏≤‡∏´‡∏≤‡πÄ‡∏£‡∏≤‚Äù**

### Nginx Config (‡πÄ‡∏™‡∏£‡∏¥‡∏°)

‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å ssl\_certificate / ssl\_certificate\_key ‡∏Ç‡∏≠‡∏á Origin Cert ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° config ‡∏ô‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ:

```nginx
ssl_client_certificate /etc/nginx/certs/cloudflare/origin-pull-ca.pem;
ssl_verify_client on;
```

* `origin-pull-ca.pem` ‡∏Ñ‡∏∑‡∏≠ certificate ‡∏Ç‡∏≠‡∏á Cloudflare ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Origin Pulls ‡∏Ç‡∏≠‡∏á Cloudflare
* `ssl_verify_client on;` ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ Nginx ‡∏¢‡∏≠‡∏°‡∏Ñ‡∏∏‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏±‡∏ö client (Cloudflare) ‡∏ó‡∏µ‡πà‡∏ñ‡∏∑‡∏≠ cert ‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

### ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏†‡∏≤‡∏û

* ‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡∏°‡∏µ‡πÅ‡∏Ñ‡πà **‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏•‡πá‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡∏ï‡∏π (Origin Cert)** ‚Üí Cloudflare ‡∏°‡∏µ‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡πÑ‡∏Ç‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÑ‡∏î‡πâ
* ‡πÅ‡∏ï‡πà‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏° **‡∏ï‡∏£‡∏ß‡∏à‡∏ö‡∏±‡∏ï‡∏£‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô (Authenticated Pull Cert)** ‚Üí ‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÉ‡∏Ñ‡∏£‡∏•‡∏≠‡∏Å‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡πÄ‡∏•‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡∏°‡∏≤ ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ï‡∏£‡∏ó‡∏µ‡πà Cloudflare ‡∏≠‡∏≠‡∏Å‡∏à‡∏£‡∏¥‡∏á ‡∏Å‡πá‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∑‡∏≠ ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡πÄ‡∏õ‡∏¥‡∏î **Authenticated Origin Pulls** ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ß‡πà‡∏≤ **‡∏ó‡∏∏‡∏Å request ‡∏ó‡∏µ‡πà‡∏ñ‡∏∂‡∏á Nginx ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å Cloudflare ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô** ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà attacker ‡∏ó‡∏µ‡πà‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏£‡∏á ‡πÜ

## 6. Deploy Configuration ‡πÑ‡∏õ‡∏ó‡∏µ‡πà VM

‡πÇ‡∏≠‡πÄ‡∏Ñ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏ó‡∏±‡πâ‡∏á **Docker/Compose** (‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ), **Nginx config** (‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö), ‡πÅ‡∏•‡∏∞ **Origin Certificate** (‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏ö‡πâ‡∏≤‡∏ô) ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏∏‡∏î ‡πÜ ‡∏Å‡πá‡∏°‡∏µ **Authenticated Origin Pulls** (‡∏ï‡∏£‡∏ß‡∏à‡∏ö‡∏±‡∏ï‡∏£‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô) ‚Ä¶‡∏ó‡∏µ‡∏ô‡∏µ‡πâ‡∏Å‡πá‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏ô‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏õ‡∏•‡∏á‡∏ö‡∏ô VM ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÅ‡∏•‡πâ‡∏ß

‡∏Å‡∏≤‡∏£ deploy ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Å‡πá‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£ **‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà** ‡∏ô‡∏±‡πà‡∏ô‡πÅ‡∏´‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏≠‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡πÜ ‡πÄ‡∏ä‡πà‡∏ô:

* `.env` (‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏ï‡πà‡∏≤‡∏á ‡πÜ ‡∏Ç‡∏≠‡∏á Actual Budget)
* `docker-compose.yml` (‡πÅ‡∏õ‡∏•‡∏ô‡∏ö‡πâ‡∏≤‡∏ô)
* `nginx/conf.d/` (‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö)
* `origin.crt` + `origin.key` (‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏ö‡πâ‡∏≤‡∏ô)

‡πÅ‡∏û‡πá‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏ñ‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å (deployment script) ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á VM ‡∏ú‡πà‡∏≤‡∏ô SSH

---

### Flow ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Deploy

1. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå config ‡∏ù‡∏±‡πà‡∏á‡πÄ‡∏£‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡∏Å‡πà‡∏≠‡∏ô** ‚Üí ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Å‡∏ß‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏ö‡∏°‡∏±‡πâ‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏ö‡πâ‡∏≤‡∏ô
2. **‡πÉ‡∏ä‡πâ script ‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏∂‡πâ‡∏ô VM ‡∏ú‡πà‡∏≤‡∏ô SCP/rsync** ‚Üí ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Ç‡∏ô‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏ñ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏™‡πà‡∏á
3. **‡πÄ‡∏ã‡πá‡∏ï permission ‡∏ö‡∏ô cert** ‚Üí ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏ö‡πâ‡∏≤‡∏ô (origin.key) ‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡∏°‡∏µ‡πÅ‡∏Ñ‡πà Nginx ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ
4. **‡∏ß‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏•‡∏á‡∏ó‡∏µ‡πà directory ‡∏Ç‡∏≠‡∏á VM** ‡πÄ‡∏ä‡πà‡∏ô `/home/ubuntu/actual`
5. **SSH ‡πÄ‡∏Ç‡πâ‡∏≤ VM ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ** ‡∏ß‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏£‡∏ö ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

---

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á Deploy

```bash
REMOTE_HOST=203.0.113.10 \
REMOTE_USER=ubuntu \
REMOTE_DIR=/home/ubuntu/actual \
SSH_KEY=~/.ssh/id_ed25519 \
./deploy-config.sh
```

script ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏£‡∏≤ validate ‡πÑ‡∏ü‡∏•‡πå, copy ‡∏Ç‡∏∂‡πâ‡∏ô VM, ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÑ‡∏ü‡∏•‡πå cert ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÉ‡∏´‡πâ

‡∏û‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ ‚Äú‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏≠‡∏¢‡∏π‡πà‚Äù ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏Ñ‡πà‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü (start service) ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡πá‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á üéâ

## 7. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ DNS ‡∏ö‡∏ô Cloudflare

‡πÇ‡∏≠‡πÄ‡∏Ñ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ñ‡∏∂‡∏á‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏ö‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡∏ó‡∏±‡πâ‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Docker + Actual Budget), ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö (Nginx), ‡πÅ‡∏•‡∏∞‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏ö‡πâ‡∏≤‡∏ô (Origin Cert) ‚Ä¶‡πÅ‡∏ï‡πà‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ **‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô**

‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏≠‡∏á‡∏ó‡∏µ‡πà **DNS** ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏°‡∏µ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏Ñ‡∏£‡∏±‡∏ö ‡∏°‡∏±‡∏ô‡∏Å‡πá‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô **‡∏™‡∏°‡∏∏‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á / Google Maps** ‡∏ó‡∏µ‡πà‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ ‚Äú‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏õ‡∏ö‡πâ‡∏≤‡∏ô‡∏ô‡∏µ‡πâ ‡πÉ‡∏´‡πâ‡∏ï‡∏≤‡∏°‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏ô‡∏∞‚Äù

‡πÉ‡∏ô Cloudflare ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÄ‡∏û‡∏¥‡πà‡∏° DNS record ‡πÉ‡∏´‡πâ domain/subdomain ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô:

* `actual-budget.mydomain.com` ‚Üí ‡∏ä‡∏µ‡πâ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **IP ‡∏Ç‡∏≠‡∏á VM** ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÉ‡∏ô Cloudflare

1. ‡πÄ‡∏Ç‡πâ‡∏≤ **Cloudflare Dashboard ‚Üí DNS**
2. ‡πÄ‡∏û‡∏¥‡πà‡∏° A record:

   * Name: `actual-budget`
   * Value: `<VM_PUBLIC_IP>`
   * Proxy: ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô **Proxied (‡πÄ‡∏°‡∏Ü‡∏™‡∏µ‡∏™‡πâ‡∏°)** ‚òÅÔ∏è
3. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **SSL/TLS ‚Üí Overview** ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Full (Strict)** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Cloudflare ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö Origin ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà‡∏°‡∏µ cert ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
4. (Optional) ‡πÄ‡∏õ‡∏¥‡∏î **Authenticated Origin Pulls** ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤ config ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà Nginx ‡πÅ‡∏•‡πâ‡∏ß

### ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° Flow ‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ DNS

```
[ User ] ‚Üí actual-budget.mydomain.com
   ‚Üì (DNS lookup by Cloudflare)
[ Cloudflare Proxy ] --HTTPS (Origin Cert)--> [ Nginx @ VM ] ‚Üí [ Actual Budget ]
```

‡∏û‡∏≠‡∏ñ‡∏∂‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡πá‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏û‡∏¥‡∏°‡∏û‡πå `https://actual-budget.mydomain.com` ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ß‡∏¥‡πà‡∏á‡∏ú‡πà‡∏≤‡∏ô Cloudflare ‚Üí Nginx ‚Üí Container ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ üîí


## 8. Start Service + Test

‡πÇ‡∏≠‡πÄ‡∏Ñ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏≤‡∏Ç‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á (Docker), ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö (Nginx), ‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏ö‡πâ‡∏≤‡∏ô (Origin Cert), ‡πÅ‡∏•‡∏∞‡∏ö‡∏≠‡∏Å‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ö‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà (DNS) ‚Ä¶‡∏ó‡∏µ‡∏ô‡∏µ‡πâ‡∏Å‡πá‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏Ñ‡∏∑‡∏≠ **‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á** ‡∏Ñ‡∏£‡∏±‡∏ö üí°

‡∏ö‡∏ô VM ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà directory ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡πÄ‡∏ä‡πà‡∏ô `/home/ubuntu/actual`) ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏±‡πà‡∏á:

```bash
docker compose up -d
```

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô Docker ‡∏Å‡πá‡∏à‡∏∞‡∏¢‡∏Å‡∏ó‡∏∏‡∏Å container ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô ‡∏ó‡∏±‡πâ‡∏á Actual Budget, Nginx, ‡πÅ‡∏•‡∏∞ service ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á

1. ‡πÉ‡∏ä‡πâ `docker ps` ‚Üí ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏µ‡πÑ‡∏ü‡∏ï‡∏¥‡∏î‡∏Ñ‡∏£‡∏ö
2. ‡πÉ‡∏ä‡πâ `docker logs -f nginx` ‚Üí ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö (Nginx) ‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏õ‡∏Å‡∏ï‡∏¥‡πÑ‡∏´‡∏°
3. ‡πÉ‡∏ä‡πâ `curl -I https://actual-budget.mydomain.com` ‚Üí ‡∏ó‡∏î‡∏•‡∏≠‡∏á ‚Äú‡∏Å‡∏î‡∏Å‡∏£‡∏¥‡πà‡∏á‡∏ö‡πâ‡∏≤‡∏ô‚Äù ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å

‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ status `200 OK` ‡∏Å‡πá‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏£‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡πÅ‡∏Ç‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö üéâ


### ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå

‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ô browser:

üëâ `https://actual-budget.mydomain.com`

‡∏ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏à‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö Actual Budget ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß üîí ‡πÇ‡∏ú‡∏•‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ ‚Üí ‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤ TLS ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á (User ‚Üí Cloudflare ‚Üí Nginx ‚Üí Container) ‡πÅ‡∏•‡πâ‡∏ß

‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡πÄ‡∏•‡∏¢‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ ‡∏à‡∏≤‡∏Å **VM ‡πÄ‡∏õ‡∏•‡πà‡∏≤ ‡πÜ** ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô **‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏≠‡∏õ‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á** ‡πÑ‡∏î‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö üöÄ

## 9. Backup Strategy

‡∏û‡∏≠‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏£‡∏£‡∏û ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏¥‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏∑‡∏° ‡πÅ‡∏ï‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÑ‡∏°‡πà‡πÅ‡∏û‡πâ‡∏Å‡∏±‡∏ô‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‚Ä¶ **‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ö‡πâ‡∏≤‡∏ô**
‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‡∏ô‡∏±‡πà‡∏ô‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ **‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ Backup** ‡∏Ñ‡∏£‡∏±‡∏ö

‡∏•‡∏≠‡∏á‡∏ô‡∏∂‡∏Å‡∏†‡∏≤‡∏û‡∏î‡∏π‡∏ß‡πà‡∏≤ ‡∏ß‡∏±‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ñ‡πâ‡∏≤‡πÑ‡∏ü‡∏î‡∏±‡∏ö ‡∏Æ‡∏≤‡∏£‡πå‡∏î‡∏î‡∏¥‡∏™‡∏Å‡πå‡∏û‡∏±‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏≤‡πÄ‡∏ú‡∏•‡∏≠‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏¥‡∏î‡πÑ‡∏õ ‚Ä¶‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏≠‡∏¢‡∏≤‡∏Å‡∏°‡∏µ‡∏ß‡∏¥‡∏ò‡∏µ ‚Äú‡∏¢‡πâ‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‚Äù ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏™‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Ñ‡∏¢‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ backup ‡∏à‡∏∂‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° **‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏´‡∏ô‡∏µ‡πÑ‡∏ü** ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏≠‡∏∏‡πà‡∏ô‡πÉ‡∏à

### ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£ Backup

1. **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ + ‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô**

   * ‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô directory `./actual-data`
   * ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á Actual Budget ‡πÄ‡∏•‡∏¢ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å

2. **SSL Certificates (origin.crt + origin.key)**

   * ‡πÅ‡∏°‡πâ‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏Ç‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å Cloudflare ‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÑ‡∏ß‡πâ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤ restore ‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô

3. **‡πÑ‡∏ü‡∏•‡πå Config ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**

   * `.env`, `docker-compose.yml`, `nginx/conf.d/*`
   * ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ö‡πâ‡∏≤‡∏ô ‡∏ñ‡πâ‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏û‡∏ß‡∏Å‡∏ô‡∏µ‡πâ‡∏´‡∏≤‡∏¢ ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏¢‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ setup ‡∏ô‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô

### ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£ Backup

* ‡∏ï‡∏±‡πâ‡∏á cron job ‡∏ö‡∏ô VM ‚Üí copy `./actual-data` ‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏¢‡∏±‡∏á storage ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å
* ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ tool ‡∏û‡∏ß‡∏Å rsync / restic ‡πÄ‡∏û‡∏∑‡πà‡∏≠ sync ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞ ‡πÜ
* ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô cloud storage ‡∏≠‡∏∑‡πà‡∏ô ‡πÄ‡∏ä‡πà‡∏ô Azure Blob, S3, ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏°‡πâ‡πÅ‡∏ï‡πà Google Drive ‡∏Å‡πá‡πÑ‡∏î‡πâ

‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ Backup = **‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏™‡∏≥‡∏£‡∏≠‡∏á** + **‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ö‡πâ‡∏≤‡∏ô**
‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤ ‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö VM ‡∏´‡∏£‡∏∑‡∏≠ container ‚Ä¶‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÑ‡∏´‡∏ô


## 10. Conclusion

‡∏à‡∏≤‡∏Å‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ **VM ‡πÄ‡∏õ‡∏•‡πà‡∏≤ ‡πÜ** ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô‡πÇ‡∏•‡πà‡∏á ‡πÜ ‡∏°‡∏≤‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÅ‡∏õ‡∏•‡∏á ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏î‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß üéâ

* ‡πÄ‡∏£‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ **VM** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Actual Budget ‡πÉ‡∏ä‡πâ SQLite ‡πÄ‡∏õ‡πá‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ native filesystem ‚Üí Managed Service ‡∏≠‡∏¢‡πà‡∏≤‡∏á Azure App Service ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå
* ‡πÄ‡∏£‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á **Docker & Docker Compose** ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏¢‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ‡∏°‡∏≤‡∏•‡∏á ‚Üí ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ service ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô
* ‡πÄ‡∏£‡∏≤ config **Environment ‡πÅ‡∏•‡∏∞ Nginx** ‚Üí ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ‡∏Ñ‡∏≠‡∏¢‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ traffic ‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
* ‡πÄ‡∏£‡∏≤‡∏Ç‡∏≠ **Cloudflare Origin Certificate** ‚Üí ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ Cloudflare ‡∏¢‡∏≠‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö origin ‡πÑ‡∏î‡πâ‡πÅ‡∏ö‡∏ö Full (Strict)
* ‡πÄ‡∏£‡∏≤‡πÄ‡∏õ‡∏¥‡∏î **Authenticated Origin Pulls** ‚Üí ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ö‡∏±‡∏ï‡∏£‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤ request ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô Cloudflare ‡∏à‡∏£‡∏¥‡∏á ‡πÜ
* ‡πÄ‡∏£‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ **DNS ‡∏ö‡∏ô Cloudflare** ‚Üí ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡πÇ‡∏•‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô
* ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ ‡πÄ‡∏£‡∏≤ start service ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ ‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ **Backup Strategy** ‡πÉ‡∏´‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ç‡∏±‡πâ‡∏ô

‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ô‡∏µ‡πâ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏≤‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏à‡∏≤‡∏Å **EP1** ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á TLS Flow ‡πÅ‡∏•‡∏∞ Certificate ‡∏°‡∏≤ **‡∏•‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô EP2** ‡∏à‡∏ô‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏≠‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏° HTTPS

‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á SSL/TLS ‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡πà‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏¢‡∏î‡∏π‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥‚Äù ‡πÄ‡∏ï‡πá‡∏°‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏®‡∏±‡∏û‡∏ó‡πå‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏¢‡∏≤‡∏Å ‡πÜ ‚Ä¶‡∏û‡∏≠‡πÄ‡∏£‡∏≤‡πÅ‡∏¢‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå, ‡∏ß‡∏≤‡∏î flow ‡πÉ‡∏´‡πâ‡∏á‡πà‡∏≤‡∏¢, ‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á‡∏•‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏≥‡∏à‡∏£‡∏¥‡∏á ‡∏°‡∏±‡∏ô‡∏Å‡πá‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏¢‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‚ú®

‡πÅ‡∏•‡∏∞‡∏ô‡∏µ‡πà‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ **Actual Budget + Nginx + Cloudflare Origin Cert** ‡∏ó‡∏µ‡πà‡∏ú‡∏°‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏•‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ 
