var _=Object.defineProperty;var x=(e,s,n)=>s in e?_(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n;var j=(e,s,n)=>x(e,typeof s!="symbol"?s+"":s,n);import"./modulepreload-polyfill.js";var p;function U(e){return{lang:(e==null?void 0:e.lang)??(p==null?void 0:p.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(p==null?void 0:p.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(p==null?void 0:p.abortPipeEarly)}}var m;function D(e){return m==null?void 0:m.get(e)}var b;function R(e){return b==null?void 0:b.get(e)}var g;function O(e,s){var n;return(n=g==null?void 0:g.get(e))==null?void 0:n.get(s)}function S(e){var n,r;const s=typeof e;return s==="string"?`"${e}"`:s==="number"||s==="bigint"||s==="boolean"?`${e}`:s==="object"||s==="function"?(e&&((r=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:r.name))??"null":s}function y(e,s,n,r,t){const i=t&&"input"in t?t.input:n.value,l=(t==null?void 0:t.expected)??e.expects??null,o=(t==null?void 0:t.received)??S(i),u={kind:e.kind,type:e.type,input:i,expected:l,received:o,message:`Invalid ${s}: ${l?`Expected ${l} but r`:"R"}eceived ${o}`,requirement:e.requirement,path:t==null?void 0:t.path,issues:t==null?void 0:t.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",a=(t==null?void 0:t.message)??e.message??O(e.reference,u.lang)??(c?R(u.lang):null)??r.message??D(u.lang);a&&(u.message=typeof a=="function"?a(u):a),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function d(e){return{version:1,vendor:"valibot",validate(s){return e["~run"]({value:s},U())}}}function M(e,s){return Object.hasOwn(e,s)&&s!=="__proto__"&&s!=="prototype"&&s!=="constructor"}function F(e,s){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${s} `)})`:n[0]??"never"}var L=class extends Error{constructor(s){super(s[0].message);j(this,"issues");this.name="ValiError",this.issues=s}};function k(e,s){return{kind:"schema",type:"object",reference:k,expects:"Object",async:!1,entries:e,message:s,get"~standard"(){return d(this)},"~run"(n,r){var i;const t=n.value;if(t&&typeof t=="object"){n.typed=!0,n.value={};for(const l in this.entries){const o=t[l],u=this.entries[l]["~run"]({value:o},r);if(u.issues){const c={type:"object",origin:"value",input:t,key:l,value:o};for(const a of u.issues)a.path?a.path.unshift(c):a.path=[c],(i=n.issues)==null||i.push(a);if(n.issues||(n.issues=u.issues),r.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),(u.value!==void 0||l in t)&&(n.value[l]=u.value)}}else y(this,"type",n,r);return n}}}function P(e,s,n){return{kind:"schema",type:"record",reference:P,expects:"Object",async:!1,key:e,value:s,message:n,get"~standard"(){return d(this)},"~run"(r,t){var l,o;const i=r.value;if(i&&typeof i=="object"){r.typed=!0,r.value={};for(const u in i)if(M(i,u)){const c=i[u],a=this.key["~run"]({value:u},t);if(a.issues){const v={type:"object",origin:"key",input:i,key:u,value:c};for(const f of a.issues)f.path=[v],(l=r.issues)==null||l.push(f);if(r.issues||(r.issues=a.issues),t.abortEarly){r.typed=!1;break}}const h=this.value["~run"]({value:c},t);if(h.issues){const v={type:"object",origin:"value",input:i,key:u,value:c};for(const f of h.issues)f.path?f.path.unshift(v):f.path=[v],(o=r.issues)==null||o.push(f);if(r.issues||(r.issues=h.issues),t.abortEarly){r.typed=!1;break}}(!a.typed||!h.typed)&&(r.typed=!1),a.typed&&(r.value[a.value]=h.value)}}else y(this,"type",r,t);return r}}}function E(e){return{kind:"schema",type:"string",reference:E,expects:"string",async:!1,message:e,get"~standard"(){return d(this)},"~run"(s,n){return typeof s.value=="string"?s.typed=!0:y(this,"type",s,n),s}}}function I(e){return{kind:"schema",type:"undefined",reference:I,expects:"undefined",async:!1,message:e,get"~standard"(){return d(this)},"~run"(s,n){return s.value===void 0?s.typed=!0:y(this,"type",s,n),s}}}function w(e){let s;if(e)for(const n of e)s?s.push(...n.issues):s=n.issues;return s}function $(e,s){return{kind:"schema",type:"union",reference:$,expects:F(e.map(n=>n.expects),"|"),async:!1,options:e,message:s,get"~standard"(){return d(this)},"~run"(n,r){let t,i,l;for(const o of this.options){const u=o["~run"]({value:n.value},r);if(u.typed)if(u.issues)i?i.push(u):i=[u];else{t=u;break}else l?l.push(u):l=[u]}if(t)return t;if(i){if(i.length===1)return i[0];y(this,"type",n,r,{issues:w(i)}),n.typed=!0}else{if((l==null?void 0:l.length)===1)return l[0];y(this,"type",n,r,{issues:w(l)})}return n}}}function V(e,s,n){const r=e["~run"]({value:s},U(n));if(r.issues)throw new L(r.issues);return r.value}const C=P(E(),$([I(),k({path:E()})])),q={notFound:"404",shortUrl:"short_url"};function G(e){const n=new URL(e).pathname.replace(/\/$/,""),r=n.split("-");if(r.length>1)return r[r.length-1]===""?null:r[r.length-1];{const t=n.split("/");return t.length>1?t[t.length-1]===""?null:t[t.length-1]:null}}function K(e){let s=null;const n=G(e);n&&(s=n,console.log(`Extracted ID from path: ${s}`));const t=new URL(e).searchParams.get("id");return t&&(s=t,console.log(`Extracted ID from search params: ${s}`)),s}function N(e){return new URL(e).pathname.match(/\/s\/[a-zA-Z0-9]+/)?"shortUrl":"notFound"}function T(e,s,n){if(!e){console.log("No mapping found for the ID");return}const r=new URL(e,s);r.searchParams.set("src",q[n]),window.location.assign(r.toString())}async function z(){var t;if(typeof window>"u")return;const e=window.location.href;console.log(`Current URL: ${e}`);const s=K(e);if(s===null)return console.log("No ID found in the URL");console.log(`Extracted ID: ${s}`);const n=await(await fetch("/api/id-mapper.json")).json(),r=V(C,n);T((t=r[s])==null?void 0:t.path,window.location.origin,N(e))}z();
